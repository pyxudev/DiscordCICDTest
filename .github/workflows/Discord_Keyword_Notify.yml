name: Discord Keyword Notify

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      # ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã€Œã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã€ã¾ãŸã¯ã€Œæˆæœã€ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹
      - name: Notify Discord
        if: >-
            ${{ github.event.head_commit.message && (
              contains(github.event.head_commit.message, 'ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆ') ||
              contains(github.event.head_commit.message, 'æˆæœ')
            ) }}
        run: |
          COMMIT_MSG="${{ github.event.head_commit.message }}"
          echo "âœ… æ¡ä»¶ã«ä¸€è‡´ã—ãŸã‚³ãƒŸãƒƒãƒˆã‚’æ¤œå‡ºã—ã¾ã—ãŸ: $COMMIT_MSG"

          curl -H "Content-Type: application/json" \
            -X POST \
            -d "{
              \"content\": \"ğŸ“£ ä»Šæ—¥ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆï¼\nğŸ“ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: $COMMIT_MSG\nğŸ”— https://github.com/${{ github.repository }}/commits/main\"
            }" \
            ${{ secrets.DISCORD_WEBHOOK_URL }}
